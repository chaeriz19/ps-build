import{_ as A,r as u,A as b,o as S,f as a,g as l,h as t,j as i,u as j,x as v,i as _,v as p,b as h}from"./index-DgN9BqVy.js";const B={setup(){const c=u(""),s=u(""),n=u(null),e=u(!0),f=u(null),g=b(),o=()=>{const d=localStorage.getItem("token");h.get("https://www.chrisouboter.com/api/user/get",{headers:{Authorization:`Bearer ${d}`}}).then(m=>{const x=m.data.user;c.value=x.email,s.value=x.name,e.value=!1}).catch(m=>{n.value="Failed to fetch user data: "+m})},k=()=>{confirm("Are you sure you want to delete your account? This action cant be reversed!!")&&w()},w=async()=>{e.value=!0;const d=localStorage.getItem("token");try{const r=await h.post("https://www.chrisouboter.com/api/user/delete",{},{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}}).then(m=>{localStorage.clear(),g.push("/login")})}catch(r){e.value=!1,n.value="An error occurred: "+r}},y=async()=>{e.value=!0;const d=localStorage.getItem("token");try{const r=await h.post("https://www.chrisouboter.com/api/user/edit",{email:c.value,name:s.value},{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});c.value=r.data.user.email,e.value=!1,n.value="",f.value="Saved account details successfully",o()}catch{e.value=!1,n.value="",n.value="An error occurred, any changes were not saved",o()}};return S(o),{email:c,name:s,error:n,loading:e,handleSubmit:y,success_message:f,confirmDeleteAccount:k,useRouter:b,router:g}}},D={class:"flex min-h-full flex-1 flex-col justify-center lg:px-8"},C={class:"bg-transparent-10 p-4 rounded-xl mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},T=t("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[t("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-black dark:text-white"}," Edit account information ")],-1),V={key:0,class:"loading-screen flex justify-center py-12"},z=t("i",{class:"fa-solid fa-spinner fa-spin-pulse fa-xl text-black dark:text-white fa-xl"},null,-1),E=[z],I={class:"mt-10 bg-red-400 rounded-sm text-center text-lg text-black dark:text-white"},M={class:"mt-10 bg-green-400 rounded-sm text-center text-lg text-black dark:text-white"},N=t("label",{for:"name",class:"block text-sm font-medium leading-6 text-black dark:text-white"},"Name",-1),q={class:"mt-2"},U=t("label",{for:"email",class:"block text-sm font-medium leading-6 text-black dark:text-white"},"Email address",-1),F={class:"mt-2"},R={type:"submit",class:"flex shadow-xl w-full justify-center rounded-md bg-white px-3 py-1.5 text-sm font-semibold leading-6 text-black shadow-xl hover:text-white hover:bg-black/40 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},G={key:0,class:""},H={key:1,class:"loading-screen"},J=t("i",{class:"fa-solid fa-spinner fa-spin-pulse fa-xl text-black dark:text-white"},null,-1),K=[J],L={key:0,class:"text-black dark:text-white"},O={key:1,class:"loading-screen"},P=t("i",{class:"fa-solid fa-spinner fa-spin-pulse fa-xl text-black dark:text-white"},null,-1),Q=[P];function W(c,s,n,e,f,g){return a(),l("div",D,[t("div",C,[T,e.loading?(a(),l("div",V,E)):i("",!0),e.loading?i("",!0):(a(),l("form",{key:1,class:"space-y-6",onSubmit:s[2]||(s[2]=j((...o)=>e.handleSubmit&&e.handleSubmit(...o),["prevent"]))},[t("p",I,v(e.error),1),t("p",M,v(e.success_message),1),t("div",null,[N,t("div",q,[_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.name=o),id:"name",name:"name",type:"text",required:"",class:"p-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[p,e.name]])])]),t("div",null,[U,t("div",F,[_(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>e.email=o),id:"email",name:"email",type:"email",autocomplete:"email",required:"",class:"p-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[p,e.email]])])]),t("div",null,[t("button",R,[e.loading?i("",!0):(a(),l("div",G,"Save")),e.loading?(a(),l("div",H,K)):i("",!0)])])],32)),e.loading?i("",!0):(a(),l("button",{key:2,onClick:s[3]||(s[3]=(...o)=>e.confirmDeleteAccount&&e.confirmDeleteAccount(...o)),class:"my-4 flex shadow-xl w-full justify-center rounded-md bg-red-400 px-3 py-1.5 text-sm font-semibold leading-6 text-black dark:text-white shadow-xl hover:bg-red-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[e.loading?i("",!0):(a(),l("div",L,"Delete account")),e.loading?(a(),l("div",O,Q)):i("",!0)]))])])}const Y=A(B,[["render",W]]);export{Y as default};
